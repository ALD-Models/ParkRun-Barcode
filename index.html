<!DOCTYPE html>
<html>

<head>
    <title>Spare Token Printer</title>
    <style>
        @media print {
            .noPrint {
                display: none;
            }
        }
    </style>
</head>

<body>
    <form class="noPrint" onsubmit="generateBarcodes(); return false;">
        Missing position token printing <br />
        Enter start position:
        <input type="number" id="startNumber" min="1" required>
        Enter end position:
        <input type="number" id="endNumber" min="1" required>
        <input type="submit" value="Generate Barcodes">
        <button onclick="printBarcodes()">Print Barcodes</button>
        <input type="button" name="clear" value="Clear" onclick="clearBarcodes()">
    </form>
    <div id='o'></div>

    <script>
        function generateBarcodes() {
            var startNumber = parseInt(document.getElementById('startNumber').value);
            var endNumber = parseInt(document.getElementById('endNumber').value);

            if (isNaN(startNumber) || isNaN(endNumber) || startNumber > endNumber) {
                alert("Invalid input. Please enter valid start and end numbers.");
                return;
            }

            var div = document.getElementById('o');
            div.innerHTML = '';

            for (var i = startNumber; i <= endNumber; i++) {
                var paddedNumber = '0000' + i;
                var barcodeImage = '<img src=\'http://results-service.parkrun.com/runnerSupport/BarcodeImagery/image.php?code=P' + paddedNumber.substr(paddedNumber.length - 4) + '\'><br>';
                div.innerHTML += barcodeImage;
            }
        }

        function printBarcodes() {
            window.print();
        }

        function clearBarcodes() {
            var div = document.getElementById('o');
            div.innerHTML = '';
        }
    </script>
</body>

</html>
